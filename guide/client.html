<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Client | Villus</title>
    <meta name="description" content="A small and fast GraphQL client for Vue.js">
    
    
    <link rel="preload" href="/villus/assets/css/0.styles.d948701f.css" as="style"><link rel="preload" href="/villus/assets/js/app.511d6170.js" as="script"><link rel="preload" href="/villus/assets/js/2.68c53dfc.js" as="script"><link rel="preload" href="/villus/assets/js/7.67bed607.js" as="script"><link rel="prefetch" href="/villus/assets/js/10.f7b8707b.js"><link rel="prefetch" href="/villus/assets/js/11.232e1b65.js"><link rel="prefetch" href="/villus/assets/js/12.084e4d1b.js"><link rel="prefetch" href="/villus/assets/js/13.e3a99420.js"><link rel="prefetch" href="/villus/assets/js/3.43f644cf.js"><link rel="prefetch" href="/villus/assets/js/4.f51ed457.js"><link rel="prefetch" href="/villus/assets/js/5.eb85da2b.js"><link rel="prefetch" href="/villus/assets/js/6.8d0950e6.js"><link rel="prefetch" href="/villus/assets/js/8.4b24d115.js"><link rel="prefetch" href="/villus/assets/js/9.7227b536.js">
    <link rel="stylesheet" href="/villus/assets/css/0.styles.d948701f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/villus/" class="home-link router-link-active"><!----> <span class="site-name">Villus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/villus/" class="nav-link">Home</a></div><div class="nav-item"><a href="/villus/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/logaretm/villus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/villus/" class="nav-link">Home</a></div><div class="nav-item"><a href="/villus/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/logaretm/villus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/villus/guide/" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/#features" class="sidebar-link">Features</a></li><li class="sidebar-sub-header"><a href="/villus/guide/#compatibility" class="sidebar-link">Compatibility</a></li><li class="sidebar-sub-header"><a href="/villus/guide/#alternatives" class="sidebar-link">Alternatives</a></li></ul></li><li><a href="/villus/guide/client.html" class="active sidebar-link">Client</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/client.html#composition-api" class="sidebar-link">Composition API</a></li><li class="sidebar-sub-header"><a href="/villus/guide/client.html#provider-component" class="sidebar-link">Provider Component</a></li><li class="sidebar-sub-header"><a href="/villus/guide/client.html#next-steps" class="sidebar-link">Next Steps</a></li></ul></li><li><a href="/villus/guide/queries.html" class="sidebar-link">Queries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#usequery" class="sidebar-link">useQuery</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#query" class="sidebar-link">Query</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#graphql-tag" class="sidebar-link">graphql-tag</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#variables" class="sidebar-link">Variables</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#manual-fetching" class="sidebar-link">Manual Fetching</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#caching" class="sidebar-link">Caching</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#watching-variables" class="sidebar-link">Watching Variables</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#other-properties" class="sidebar-link">Other properties</a></li><li class="sidebar-sub-header"><a href="/villus/guide/queries.html#suspense" class="sidebar-link">Suspense</a></li></ul></li><li><a href="/villus/guide/mutations.html" class="sidebar-link">Mutations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/mutations.html#passing-variables" class="sidebar-link">Passing Variables</a></li><li class="sidebar-sub-header"><a href="/villus/guide/mutations.html#other-properties" class="sidebar-link">Other Properties</a></li></ul></li><li><a href="/villus/guide/headers.html" class="sidebar-link">Headers</a></li><li><a href="/villus/guide/subscriptions.html" class="sidebar-link">Subscriptions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/subscriptions.html#subscription-component" class="sidebar-link">Subscription Component</a></li><li class="sidebar-sub-header"><a href="/villus/guide/subscriptions.html#usesubscription" class="sidebar-link">useSubscription</a></li></ul></li><li><a href="/villus/guide/using-the-client-manually.html" class="sidebar-link">Using The Client Manually</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villus/guide/using-the-client-manually.html#executing-queries" class="sidebar-link">Executing Queries</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="client"><a href="#client" aria-hidden="true" class="header-anchor">#</a> Client</h1> <p>To start querying GraphQL endpoints, you need to setup a client for that endpoint. <strong>villus</strong> exposes both a <code>useClient</code> and <code>createClient</code> functions that allows you to create GraphQL clients for your endpoints.</p> <h2 id="composition-api"><a href="#composition-api" aria-hidden="true" class="header-anchor">#</a> Composition API</h2> <p>If you are using the new composition API you will use the <code>useClient</code> function along with <code>useXXX</code> variants of the API for your queries, mutations and subscriptions.</p> <p>To create a GraphQL client with the composition API:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'villus'</span><span class="token punctuation">;</span>

<span class="token comment">// Your App component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">:</span> <span class="token string">'/graphql'</span> <span class="token comment">// your endpoint.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="provider-component"><a href="#provider-component" aria-hidden="true" class="header-anchor">#</a> Provider Component</h2> <p>If you prefer to use the higher-order components API you need to use the <code>createClient</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'villus'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/graphql'</span> <span class="token comment">// your endpoint.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>After you've created a client, you need to <strong>provide</strong> the client instance to your app, you can do this via two ways.</p> <p><strong>villus</strong> exports a <code>Provider</code> component that accepts a single prop, the <code>client</code> created by <code>createClient</code> function.</p> <h3 id="sfc"><a href="#sfc" aria-hidden="true" class="header-anchor">#</a> SFC</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">:client</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>client<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'villus'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/graphql'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Provider
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    client
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="jsx"><a href="#jsx" aria-hidden="true" class="header-anchor">#</a> JSX</h3> <p>This can be much easier if you are using JSX:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'villus'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/graphql'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">client</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{client}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The <strong>Provider</strong> component is <strong>renderless</strong> by default, meaning it will not render any extra HTML other than its slot, but only when exactly one child is present, if multiple children exist inside its slot it will render a <code>span</code>.</p></div> <h3 id="withprovider-function"><a href="#withprovider-function" aria-hidden="true" class="header-anchor">#</a> withProvider function</h3> <p><strong>villus</strong> exposes a <code>withProvider</code> function that takes a Vue component and returns the same component wrapped by the <code>Provider</code> component, it is very handy to use in JS components and render functions.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createClient<span class="token punctuation">,</span> withProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'villus'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/graphql'</span> <span class="token comment">// Your endpoint</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use this instead of your App</span>
<span class="token keyword">const</span> AppWithClient <span class="token operator">=</span> <span class="token function">withProvider</span><span class="token punctuation">(</span>App<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Render the wrapped version instead.</span>
  render<span class="token punctuation">:</span> h <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>AppWithClient<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="multiple-providers"><a href="#multiple-providers" aria-hidden="true" class="header-anchor">#</a> Multiple Providers</h3> <p>While uncommon, there is no limitations on how many endpoints you can use within your app, you can use as many clients as you like and that allows you to query different GraphQL APIs within the same app without hassle.</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">:client</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>githubClient<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PartOfApp</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">:client</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>appApi<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OtherPart</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For the composition API you will need to create a parent component for each client:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Component A</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'GitHubProvider'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">:</span> <span class="token string">'{GITHUB_API_ENDPOINT}'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Component B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'AppAPI'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">:</span> <span class="token string">'{MY_API}'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="header-anchor">#</a> Next Steps</h2> <p>Now that you have successfully setup the GraphQL client, you can start to <a href="/villus/guide/queries.html">query</a> and <a href="/villus/guide/mutations.html">execute mutations</a> on your GraphQL APIs.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/villus/guide/" class="prev router-link-active">Introduction</a></span> <span class="next"><a href="/villus/guide/queries.html">Queries</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/villus/assets/js/app.511d6170.js" defer></script><script src="/villus/assets/js/2.68c53dfc.js" defer></script><script src="/villus/assets/js/7.67bed607.js" defer></script>
  </body>
</html>
